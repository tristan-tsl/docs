---
typora-copy-images-to: pic
---

# 首页

访问地址: [http://pass.yibainetwork.com](http://pass.yibainetwork.com/)

出现如下界面

![1566890682972](D:\docs\tristan\Pass平台\pic\1566890682972.png)

# 登录功能

1、打开手机APP-钉钉
2、打开扫一扫

3、对准屏幕中显示的二维码

4、确定登录

当扫码后会自动跳转并弹出提示显示登录成功和当前登录人的名称

# 作战计划

## 项目中心

### 总工单

#### 审核

![1566891098033](D:\docs\tristan\Pass平台\pic\1566891098033.png)

![1566891112481](D:\docs\tristan\Pass平台\pic\1566891112481.png)

对一个工单的操作为



|   动作   |                             含义                             | 触发状态 | 结果状态       |
| :------: | :----------------------------------------------------------: | -------- | -------------- |
|   审核   | 使得流程可以进入下一步,如果是最后一个流程,则会直接执行工单中的内容,例如发包、执行SQL、修改计划任务 | 运行中   | 运行中/已完成  |
|   回滚   |        根据回滚规回滚成工单执行前的状态且不可重复回滚        | 已完成   | 已完成，已回滚 |
| 审核驳回 |       终止工单并设置成已驳回状态,注意需要填写驳回理由        | 运行中   | 已驳回         |
|   销毁   |                  销毁工单并设置成已销毁状态                  |          | 已销毁         |
|   内容   | 查看工单具体会做的事情,对什么样的目标做什么样的修改动作并修改之后的数据 |          |                |
|   日志   |             查看工单最终执行时其中显示出来的日志             |          |                |







### 代码部署

![1566890899300](D:\docs\tristan\Pass平台\pic\1566890899300.png)

![1566891032844](D:\docs\tristan\Pass平台\pic\1566891032844.png)

| 表单key  |                             含义                             |                             取值                             |
| :------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 前置工单 | 当多个工单形成的混合工单且有明确执行顺序时用以约束最终审核人的审核动作 | 来自 总工单-审核 中具体列的ID值,如果有多个前置工单且有序,请按顺序将多个工单的ID值以;间隔拼接在一起 |
|   标题   |      表明此次工单的一些信息,主要用作后续搜索和排查问题       |                                                              |
| 项目类型 |                          代码的类型                          |                           java/php                           |
|   项目   |                       选择一个java项目                       |                  来自部署模板,由管理员添加                   |
| 审核流程 |                       用以反复确定动作                       | 来自总工单中的模板设计和角色管理和用户产品,计算规则为: 按照模板中规定的角色去流转,从后向前推出当前登录人所在角色并以该角色为流程起始点向后续推角色,后续角色必须与当前登录人有相同的产品标签。目前的审核流程为开发 > 测试 > 产品 > 产品经理 |
|  镜像id  |                   服务部署在容器中的镜像id                   |           java端通过jenkins/gitlab构成生成的镜像id           |
|  包列表  |            php端需要更新线上服务中代码的tag包列表            | 来自开发抽取的包的svn地址,如果有多个包请一行一个包的规则去填写,每一个包都有明确的校验规则,该包的url的前缀必须为服务器允许的地址(目前为: http://dp.yibai-it.com:10002),包中解压的第一级目录必须为trunk,包结尾必须为zip/rar |
| 其他参数 |                       暂时只是用作声明                       |                  直接选其中的唯一一个值即可                  |

### 执行SQL

![1566892901719](D:\docs\tristan\Pass平台\pic\1566892901719.png)



![1566892940095](D:\docs\tristan\Pass平台\pic\1566892940095.png)

| 表单key  |                       含义                        |                             取值                             |
| :------: | :-----------------------------------------------: | :----------------------------------------------------------: |
|   标题   | 表明此次工单的一些信息,主要用作后续搜索和排查问题 |                                                              |
|   环境   |                    执行的环境                     |                     直接选唯一显示的即可                     |
|  MySQL   |              需要让哪个MySQL执行SQL               |            来自资产管理-MySQL,管理员录入,支持搜索            |
|  数据库  |              需要让哪个数据库执行SQL              |           连接MySQL运行show database的值,支持搜索            |
| 审核流程 |                 用以反复确定动作                  | 来自总工单中的模板设计和角色管理和用户产品,计算规则为: 按照模板中规定的角色去流转,从后向前推出当前登录人所在角色并以该角色为流程起始点向后续推角色,后续角色必须与当前登录人有相同的产品标签。目前的审核流程为开发 > 测试 > 产品 > 产品经理 |

### 计划任务

![1566893237347](D:\docs\tristan\Pass平台\pic\1566893237347.png)

![1566893245750](D:\docs\tristan\Pass平台\pic\1566893245750.png)

| 表单key  |                             含义                             |                             取值                             |
| :------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
| 前置工单 | 当多个工单形成的混合工单且有明确执行顺序时用以约束最终审核人的审核动作 | 来自 总工单-审核 中具体列的ID值,如果有多个前置工单且有序,请按顺序将多个工单的ID值以;间隔拼接在一起 |
|   标题   |      表明此次工单的一些信息,主要用作后续搜索和排查问题       |                            环境你                            |
|   环境   |                          执行的环境                          |                    直接选择唯一的选项即可                    |
|  服务器  |              需要修改哪个部署服务器中的crontab               |                  来自部署模板,由管理员添加                   |
| 审核流程 |                       用以反复确定动作                       | 来自总工单中的模板设计和角色管理和用户产品,计算规则为: 按照模板中规定的角色去流转,从后向前推出当前登录人所在角色并以该角色为流程起始点向后续推角色,后续角色必须与当前登录人有相同的产品标签。目前的审核流程为开发 > 测试 > 产品 > 产品经理 |



关于修改计划任务:

使用ctrl + f 直接搜索字符即可, 找到该行并点击该行的修改按钮

![1566893408973](D:\docs\tristan\Pass平台\pic\1566893408973.png)

修改的具体内容

![1566893481533](D:\docs\tristan\Pass平台\pic\1566893481533.png)

建议修改crontab要谨慎,去上图中校验linux crontab的界面去校验即可

